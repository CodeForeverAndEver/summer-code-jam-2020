{% extends 'dashboard/base.html' %}

{% load static %}
{% block content %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'dashboard/css/search-engine/results.css' %}">
<link href="https://unpkg.com/nes.css@2.3.0/css/nes.min.css" rel="stylesheet" />
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
{% endblock extra_css %}

<h1 id="engine-results-header", align="center">Results for search: "{{ search }}" </h1>
{% include 'dashboard/search-engine/searchbar.html'  %}

<hr>

<div id="engine-res">
    {% if description != ''  %}
    <button id="main-desc" class="nes-btn is-primary">{{ description  }}</button>
    <br><br>
    {% endif %}
    {% if top_results|length > 0  %}
    <div id="top-res" class="nes-container with-title is-centered res-box" style="background-color:lightgreen;">
        <p class="title nes-text is-success">Top Results</p>
        {% for t in top_results  %}
        <section>
            <button  id="top-res" class="nes-btn is-success search-res" align="center" onclick="document.getElementById('{{ t.title }}').showModal();">{{ t.title  }}</button>
            <dialog class="nes-dialog" id='{{ t.title  }}'>
                <form method="dialog">
                    <p class="title is-primary nes-text">{{ t.title  }}</p>
                    <p>{{ t.info  }}</p>
                    <menu class="dialog-menu">
                        <button class="nes-btn is-error">Go Back</button>
                        <a href='{{ t.further_info  }}' target="_blank"><button class="nes-btn is-primary">Learn More</button></a>
                    </menu>
                </form>
            </dialog>
        </section> <br> 
        {% endfor  %}
    </div>
    {% endif  %}
    <br>
    {% if other_results|length > 0  %}
    <div id="other-res" class="nes-container with-title is-centered res-box">
        <p class="title nes-text">Related Topics</p>
        {% for o in other_results  %}
        <section>
            <button id="other-res" class="nes-btn search-res" align="center" onclick="document.getElementById('{{ o.title }}').showModal();">{{ o.title  }}</button>
            <dialog class="nes-dialog" id='{{ o.title  }}'>
                <form method="dialog">
                    <p class="title is-primary">{{ o.title  }}</p>
                    <p>{{ o.info  }}</p>
                    <menu class="dialog-menu">
                        <button class="nes-btn is-error">Go Back</button>
                        <a href='{{ o.further_info  }}' target="_blank"><button class="nes-btn is-primary">Learn More</button></a>
                    </menu>
                </form>
            </dialog>
        </section> <br>
        {% endfor  %}
    </div>
    {% endif %}
    
</div>

<br><br>
{% if other_results|length == 0 and top_results|length == 0 %}
<h3 id='no-results-found' align="center">No search results found.</h3>
{% endif  %}


{% endblock content  %}

{% block extra_scripts %}

<script src="jquery-3.5.1.min.js"></script>


{% endblock  %}
