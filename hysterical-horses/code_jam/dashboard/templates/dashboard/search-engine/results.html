{% extends 'dashboard/base.html' %}

{% load static %}
{% block content %}

{% block extra_css %}
<link rel="stylesheet" type="text/css" href="{% static 'dashboard/css/search-engine/results.css' %}">
{% endblock extra_css %}

<h1 id="engine-results-header", align="center">Results for search: "{{ shortened }}" </h1>
{% include 'dashboard/search-engine/searchbar.html'  %}

<hr>

<div id="engine-res">
    {% if description != ''  %}
    <button id="main-desc" class="nes-btn is-primary">{{ description  }}</button>
    <br><br>
    {% endif %}
    {% if top_results|length > 0  %}
    <div id="top-res" class="nes-container with-title is-centered res-box" style="background-color:lightgreen;">
        <p class="title nes-text is-success">Top Results</p>
        {% for t in top_results  %}
        <section>
            <button  id="top-res" class="nes-btn is-success search-res" align="center" onclick="document.getElementById('{{ forloop.counter0 }}').showModal();">{{ t.title  }}</button>
            <dialog class="nes-dialog" id='{{  forloop.counter0  }}'>
                <form method="dialog">
                    <p class="title is-primary nes-text">{{ t.title  }}</p>
                    <p>{{ t.info  }}</p>
                    <menu class="dialog-menu">
                        <button class="nes-btn is-error">Go Back</button>
                        <a href='{{ t.further_info  }}' target="_blank"><button class="nes-btn is-primary">Learn More</button></a>
                    </menu>
                </form>
            </dialog>
        </section> <br> 
        {% endfor  %}
    </div>
    {% endif  %}
    <br>
    {% if other_results|length > 0  %}
    <div id="other-res" class="nes-container with-title is-centered res-box">
        <p class="title nes-text">Related Topics</p>
        {% for o in other_results  %}
        <section>
            <button id="other-res" class="nes-btn search-res" align="center" onclick="document.getElementById('{{ forloop.counter0|add:3 }}').showModal();">{{ o.title  }}</button>
            <dialog class="nes-dialog" id='{{  forloop.counter0|add:3  }}'>
                <form method="dialog">
                    <p class="title is-primary">{{ o.title  }}</p>
                    <p>{{ o.info  }}</p>
                    <menu class="dialog-menu">
                        <button class="nes-btn is-error">Go Back</button>
                        <a href='{{ o.further_info  }}' target="_blank"><button class="nes-btn is-primary">Learn More</button></a>
                    </menu>
                </form>
            </dialog>
        </section> <br>
        {% endfor  %}
    </div>
    {% endif %}
    
    {% if other_results|length == 0 and top_results|length == 0 %}
    <h3 id='no-results-found' align="center">No search results found.</h3>
    {% endif  %}

    <div>
        <a href="https://duckduckgo.com/" target="_blank">Results from DuckDuckGo</a>
        <img src="https://upload.wikimedia.org/wikipedia/en/thumb/8/88/DuckDuckGo_logo.svg/1200px-DuckDuckGo_logo.svg.png" style="height: 50px;">
        <p style="font-size: 10px">Thank you so much DuckDuckGo for having the only free search engine, you are all MVPs in our book <3</p>
    </div>
    
</div>




{% endblock content  %}

{% block extra_scripts %}

<script src="jquery-3.5.1.min.js"></script>


{% endblock  %}
